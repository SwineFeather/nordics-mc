import{I as ie,r as t,bN as ce,j as e,aO as re,aP as oe,v as n,aQ as de,bQ as he,bR as u,aR as i,b7 as xe,b8 as ue,o as m,p as j,q as p,t as g,O as a,X as y,bP as w,Z as me,$ as je,a0 as pe,a1 as ge,a2 as k,b1 as we,aF as c}from"./index-DUDTAd9W.js";import{S as v}from"./switch-cn-L-SuC.js";import{S as ve}from"./separator-BkI5HRhN.js";import{E as Ce}from"./ellipsis-Cad-C1ff.js";import{P as Se}from"./pen-line-MjRWahhH.js";import{C as fe}from"./copy-DxsP4cii.js";import{D as ye}from"./download-Dh3YjV-9.js";import{U as ke}from"./upload-tHEKoL-4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=ie("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),Re=({page:l,onDelete:F,onRename:I,onMove:T,onDuplicate:R,onExport:L,onImport:O,onUpdateSettings:_})=>{const[A,Q]=t.useState(!1),[z,r]=t.useState(!1),[U,o]=t.useState(!1),[V,d]=t.useState(!1),[q,h]=t.useState(!1),[C,B]=t.useState(l.title),[S,H]=t.useState(l.category||""),[b,J]=t.useState(l.status||"published"),[D,W]=t.useState(l.description||""),[X,Z]=t.useState(!0),[$,P]=t.useState(!0),[G,K]=t.useState(!0),[N,M]=t.useState(!1),[f,E]=t.useState(null);t.useEffect(()=>{try{const{frontmatter:s}=ce.parseFrontmatterPublic(l.content||""),x=String((s==null?void 0:s.live_sync_enabled)||"").toLowerCase()==="true";M(x),typeof(s==null?void 0:s.allow_comments)<"u"&&P(String(s.allow_comments).toLowerCase()==="true")}catch{}},[l.id,l.content]);const Y=()=>{F(l.id),Q(!0),c.success("Page deleted successfully!")},ee=()=>{C.trim()&&(I(l.id,C.trim()),r(!1),c.success("Page renamed successfully!"))},se=()=>{S.trim()&&(T(l.id,S.trim()),o(!1),c.success("Page moved successfully!"))},te=()=>{R(l),c.success("Page duplicated successfully!")},le=()=>{L(l),c.success("Page exported successfully!")},ne=()=>{f&&(O(f),h(!1),E(null),c.success("Page imported successfully!"))},ae=()=>{_(l.id,{status:b,description:D,live_sync_enabled:N}),d(!1),c.success("Page settings updated!")};return A?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"This page has been deleted."})}):e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(Ce,{className:"h-4 w-4"})})}),e.jsxs(de,{align:"end",children:[e.jsx(he,{children:"Page Management"}),e.jsx(u,{}),e.jsxs(i,{onClick:()=>r(!0),children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Rename Page"]}),e.jsxs(i,{onClick:()=>o(!0),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Move Page"]}),e.jsxs(i,{onClick:te,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Duplicate Page"]}),e.jsx(u,{}),e.jsxs(i,{onClick:le,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Export Page"]}),e.jsxs(i,{onClick:()=>h(!0),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Import Page"]}),e.jsx(u,{}),e.jsxs(i,{onClick:()=>d(!0),children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Page Settings"]}),e.jsx(u,{}),e.jsxs(i,{onClick:Y,className:"text-destructive",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Delete Page"]})]})]}),e.jsx(m,{open:z,onOpenChange:r,children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(g,{children:"Rename Page"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(a,{htmlFor:"newTitle",children:"New Title"}),e.jsx(y,{id:"newTitle",value:C,onChange:s=>B(s.target.value),placeholder:"Enter new page title"})]})}),e.jsxs(w,{children:[e.jsx(n,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(n,{onClick:ee,children:"Rename"})]})]})}),e.jsx(m,{open:U,onOpenChange:o,children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(g,{children:"Move Page"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(a,{htmlFor:"newCategory",children:"New Category"}),e.jsx(y,{id:"newCategory",value:S,onChange:s=>H(s.target.value),placeholder:"Enter new category path (e.g., guides/tutorials)"})]})}),e.jsxs(w,{children:[e.jsx(n,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(n,{onClick:se,children:"Move"})]})]})}),e.jsx(m,{open:V,onOpenChange:d,children:e.jsxs(j,{className:"max-w-md",children:[e.jsx(p,{children:e.jsx(g,{children:"Page Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(me,{value:b,onValueChange:s=>J(s),children:[e.jsx(je,{children:e.jsx(pe,{})}),e.jsxs(ge,{children:[e.jsx(k,{value:"published",children:"Published"}),e.jsx(k,{value:"draft",children:"Draft"}),e.jsx(k,{value:"review",children:"Review"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(we,{id:"description",value:D,onChange:s=>W(s.target.value),placeholder:"Enter page description",rows:3})]}),e.jsx(ve,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{htmlFor:"public",children:"Public Page"}),e.jsx(v,{id:"public",checked:X,onCheckedChange:Z})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{htmlFor:"comments",children:"Allow Comments"}),e.jsx(v,{id:"comments",checked:$,onCheckedChange:P})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{htmlFor:"edits",children:"Allow Edits"}),e.jsx(v,{id:"edits",checked:G,onCheckedChange:K})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{htmlFor:"live-sync",children:"Enable Live Data Sync (Quick Stats / Location / Info)"}),e.jsx(v,{id:"live-sync",checked:N,onCheckedChange:M})]})]})]}),e.jsxs(w,{children:[e.jsx(n,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(n,{onClick:ae,children:"Save Settings"})]})]})}),e.jsx(m,{open:q,onOpenChange:h,children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(g,{children:"Import Page"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(a,{htmlFor:"file",children:"Select Markdown File"}),e.jsx(y,{id:"file",type:"file",accept:".md,.markdown",onChange:s=>{var x;return E(((x=s.target.files)==null?void 0:x[0])||null)}})]})}),e.jsxs(w,{children:[e.jsx(n,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(n,{onClick:ne,disabled:!f,children:"Import"})]})]})})]})};export{Re as P};
