import{aN as z,r as p,j as e,v as a,b7 as M,b2 as A,w as f,x as j,y as g,z as N,aS as c,h as o,aV as B,B as y,b8 as F,br as L,az as D,a8 as E,E as $}from"./index-BDwxLbfg.js";import{F as H}from"./filter-NS2wN-5_.js";import{M as P}from"./mail-DdsCDVWN.js";const V=()=>{const{notifications:r,markNotificationRead:w,markAllNotificationsRead:v,deleteNotification:_,loading:b}=z(),[t,d]=p.useState("all"),[i,x]=p.useState("all"),l=r.filter(s=>!(t==="unread"&&s.read_at||t==="read"&&!s.read_at||i!=="all"&&s.notification_type!==i)),k=async s=>{var n,h;s.read_at||await w(s.id),(n=s.data)!=null&&n.post_id?window.location.href=`/forum/post/${s.data.post_id}`:(h=s.data)!=null&&h.category_id&&(window.location.href=`/forum/category/${s.data.category_id}`)},C=async()=>{await v()},S=async s=>{await _(s)},R=s=>{switch(s){case"post_reply":return e.jsx($,{className:"h-5 w-5"});case"post_mention":case"reply_mention":return e.jsx(P,{className:"h-5 w-5"});case"post_like":case"reply_like":return e.jsx(E,{className:"h-5 w-5"});case"post_saved":return e.jsx(c,{className:"h-5 w-5"});case"category_subscription":return e.jsx(c,{className:"h-5 w-5"});case"moderation_action":return e.jsx(D,{className:"h-5 w-5"});case"warning_issued":return e.jsx(L,{className:"h-5 w-5"});default:return e.jsx(c,{className:"h-5 w-5"})}},m=s=>{switch(s){case"urgent":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-blue-600";case"low":return"text-gray-600";default:return"text-blue-600"}},u=s=>{switch(s){case"post_reply":return"Replies";case"post_mention":return"Mentions";case"reply_mention":return"Reply Mentions";case"post_like":return"Likes";case"reply_like":return"Reply Likes";case"post_saved":return"Saved";case"category_subscription":return"Category Updates";case"moderation_action":return"Moderation";case"warning_issued":return"Warnings";default:return s}},T=[...new Set(r.map(s=>s.notification_type))];return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with forum activity and community interactions"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",onClick:()=>window.location.href="/settings/notifications",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Settings"]}),r.some(s=>!s.read_at)&&e.jsxs(a,{onClick:C,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Mark All Read"]})]})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>d("all"),children:["All (",r.length,")"]}),e.jsxs(a,{variant:t==="unread"?"default":"outline",size:"sm",onClick:()=>d("unread"),children:["Unread (",r.filter(s=>!s.read_at).length,")"]}),e.jsxs(a,{variant:t==="read"?"default":"outline",size:"sm",onClick:()=>d("read"),children:["Read (",r.filter(s=>s.read_at).length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>x("all"),children:"All Types"}),T.map(s=>e.jsx(a,{variant:i===s?"default":"outline",size:"sm",onClick:()=>x(s),children:u(s)},s))]})]})})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsxs(g,{children:[l.length," notification",l.length!==1?"s":""]})}),e.jsx(N,{children:b?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading notifications..."})}):l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No notifications"}),e.jsx("p",{className:"text-muted-foreground",children:t==="all"?"You don't have any notifications yet.":`No ${t} notifications found.`})]}):e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs("div",{className:o("flex items-start gap-4 p-4 rounded-lg border cursor-pointer hover:bg-accent transition-colors",!s.read_at&&"bg-blue-50 dark:bg-blue-950/20 border-blue-200"),onClick:()=>k(s),children:[e.jsx("div",{className:o("flex-shrink-0 p-2 rounded-full",m(s.priority)),children:R(s.notification_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:o("text-sm font-medium mb-1",m(s.priority)),children:s.title}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:B(new Date(s.created_at),{addSuffix:!0})}),e.jsx(y,{variant:"outline",className:"text-xs",children:u(s.notification_type)}),s.priority!=="medium"&&e.jsx(y,{variant:"secondary",className:"text-xs",children:s.priority})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex gap-2",children:[!s.read_at&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsx(a,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),S(s.id)},className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(F,{className:"h-4 w-4"})})]})]},s.id))})})]})]})})};export{V as default};
