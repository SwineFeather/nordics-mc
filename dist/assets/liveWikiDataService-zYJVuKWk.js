class o{static async getLiveWikiData(e,t){try{const n=await fetch("https://erdconvorgecupvavlwv.supabase.co/functions/v1/get-live-wiki-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyZGNvbnZvcmdlY3VwdmF2bHd2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTU4Mzg4NywiZXhwIjoyMDY1MTU5ODg3fQ.eQCYcODSB3Tb6z47iXMi_oqHmKaTqeVM1MGoSgx4MUk"},body:JSON.stringify({entity_type:e,entity_name:t})});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch live data")}return await n.json()}catch(n){throw console.error("Error fetching live wiki data:",n),n}}static shouldUseLiveData(e){return e.includes("/towns/")||e.includes("/nations/")||e.includes("/Nordics/towns/")||e.includes("/Nordics/nations/")}static extractEntityInfo(e){const t=e.split("/");return t.includes("towns")&&t.length>0?{entityType:"town",entityName:t[t.length-1].replace(".md","").replace(/_/g," ")}:t.includes("nations")&&t.length>0?{entityType:"nation",entityName:t[t.length-1].replace(".md","").replace(/_/g," ")}:{entityType:null,entityName:null}}static async getLiveContent(e){try{if(!this.shouldUseLiveData(e))return null;const{entityType:t,entityName:n}=this.extractEntityInfo(e);return!t||!n?null:(await this.getLiveWikiData(t,n)).content}catch(t){return console.error("Error getting live content:",t),null}}}export{o as LiveWikiDataService};
