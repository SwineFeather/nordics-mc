import{I as De,ax as Be,ay as te,r as d,j as e,w as j,z as p,G as Me,a7 as Fe,Q as se,az as Ae,aA as E,x as F,y as A,B as f,a4 as W,U as qe,aB as Ie,aC as ze,v as u,aD as Pe,aq as Re,aE as Ge,L as Ve,s as O,aF as z,aG as J,F as fe,H as re,aH as Ne,aI as oe,O as v,u as le,at as ve,au as be,av as G,aw as V,W as we,X as ie,Z as $,$ as U,a0 as H,a1 as Q,a2 as y,a6 as $e,aJ as Ue,a8 as He,aK as ye,aL as Qe,aM as We,as as Oe}from"./index-BDwxLbfg.js";import{S as ne}from"./SimpleMarkdownRenderer-48bOWxLE.js";import{C as ae}from"./CreateCompanyModal-uGax7U5r.js";import{E as Ce}from"./external-link-DMGOVlse.js";import{C as me}from"./circle-x-hzf92Dg-.js";import{F as Se}from"./filter-NS2wN-5_.js";import{T as de}from"./trending-up-CmxDmib0.js";import{u as Je}from"./useShopsData-DSSRsv2y.js";import{T as _e,C as Ye,S as xe}from"./ShopCard-ChrMdGbc.js";import{M as Ke,g as he,a as Xe,b as Ze,c as es,d as ss,f as as,m as ue,e as P,h as R}from"./MinecraftItemImage-B08oUpod.js";import{M as ts}from"./minus-BS56cca9.js";import{R as ge}from"./refresh-cw-CWYIYyYX.js";import{C as rs}from"./coins-C6lwFDE4.js";import{P as je}from"./package-DIOTFOqO.js";import{L as ls}from"./list-DgrYmvyF.js";import{L as is}from"./loader-circle-BQXbm3ye.js";import{B as ns}from"./building-nraDPmQ5.js";import"./usePlayerSearch-6-rZ-bFC.js";import"./playerTownService-Cn9WKRSh.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),cs=()=>{const{companies:t,loading:c,error:o}=Be();te();const[N,_]=d.useState(new Set),C=t.filter(l=>l.business_type==="Enterprise"||l.business_type==="Group"||l.business_type==="Holding Company"),a=l=>t.filter(m=>m.parent_company_id===l),b=l=>{const m=new Set(N);m.has(l)?m.delete(l):m.add(l),_(m)},k=l=>({Mining:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",Trading:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Manufacturing:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",Farming:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200",Technology:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Conglomerate:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200","Holding Company":"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"})[l]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Failed to load company groups"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx(ae,{onCompanyCreated:()=>{window.location.reload()}})}),e.jsx(j,{className:"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-950/30 dark:to-yellow-950/30 border-amber-200 dark:border-amber-800",children:e.jsxs(p,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Me,{className:"w-12 h-12 mx-auto mb-4 text-amber-600"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Enterprise Benefits"}),e.jsx("p",{className:"text-muted-foreground",children:"Special treatment and exclusive perks for enterprise members"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/50 dark:bg-black/20",children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-3 text-purple-600"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Custom Items & Textures"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Access to exclusive custom items, textures, and in-game content"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/50 dark:bg-black/20",children:[e.jsx(se,{className:"w-8 h-8 mx-auto mb-3 text-teal-600"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Dedicated Subdomain & Website"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your own subdomain under nordics.world with a full enterprise page (e.g. yourbrand.nordics.world)"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/50 dark:bg-black/20",children:[e.jsx(Ae,{className:"w-8 h-8 mx-auto mb-3 text-blue-600"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Enhanced Platform & Priority Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Premium features, higher member limits, and faster processing for requests"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/50 dark:bg-black/20",children:[e.jsx(ds,{className:"w-8 h-8 mx-auto mb-3 text-green-600"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Exclusive Events"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Access to special events, competitions, and community activities"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/50 dark:bg-black/20",children:[e.jsx(E,{className:"w-8 h-8 mx-auto mb-3 text-red-600"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Subsidiary Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tools to manage multiple subsidiaries under one enterprise"})]})]})]})}),C.length===0?e.jsxs(j,{className:"text-center py-12",children:[e.jsx(E,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Enterprise Groups Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Be the first to create an enterprise group and lead the business community!"}),e.jsx(ae,{onCompanyCreated:()=>{window.location.reload()}})]}):e.jsx("div",{className:"grid gap-8",children:C.map(l=>{const m=a(l.id),w=N.has(l.id);return e.jsxs(j,{className:"overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-primary/20",children:[e.jsx(F,{className:"bg-gradient-to-r from-primary/10 to-secondary/10 border-b",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(A,{className:"text-2xl",children:l.name}),l.is_featured&&e.jsxs(f,{className:"bg-yellow-500 text-white border-0",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:l.business_type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[m.length," Subsidiaries"]})]}),l.headquarters_world&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:l.headquarters_world})]})]}),l.tagline&&e.jsxs("p",{className:"text-lg text-muted-foreground italic font-medium",children:['"',l.tagline,'"']})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(f,{className:`${k(l.industry)} text-sm font-medium`,children:l.industry})})]})}),e.jsxs(p,{className:"p-0",children:[l.description&&e.jsx("div",{className:"p-8 border-b bg-gradient-to-r from-muted/30 to-muted/10",children:e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:e.jsx(ne,{content:l.description})})}),e.jsx("div",{className:"p-8",children:e.jsxs(Ie,{open:w,onOpenChange:()=>b(l.id),children:[e.jsx(ze,{asChild:!0,children:e.jsxs(u,{variant:"ghost",className:"w-full justify-between p-4 h-auto hover:bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"text-xl font-semibold",children:"Subsidiary Companies"}),e.jsx(f,{variant:"secondary",className:"text-sm",children:m.length})]}),w?e.jsx(Pe,{className:"w-6 h-6"}):e.jsx(Re,{className:"w-6 h-6"})]})}),e.jsx(Ge,{className:"mt-6",children:m.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-muted rounded-lg",children:[e.jsx(E,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No subsidiaries registered yet."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This enterprise can add subsidiary companies to expand their business portfolio."})]}):e.jsx("div",{className:"grid gap-4",children:m.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h5",{className:"font-semibold text-lg",children:h.name}),h.is_featured&&e.jsx(W,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(f,{variant:"outline",className:"text-xs",children:h.business_type}),e.jsx(f,{className:`text-xs ${k(h.industry)}`,children:h.industry}),h.headquarters_world&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3 h-3"}),h.headquarters_world]})]}),h.tagline&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 italic",children:h.tagline})]}),e.jsx(Ve,{to:`/company/${h.slug}`,children:e.jsxs(u,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"View"]})})]},h.id))})})]})})]})]},l.id)})}),e.jsx(j,{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/30 dark:to-cyan-950/30 border-blue-200 dark:border-cyan-800",children:e.jsxs(p,{className:"p-8",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-6 h-6"}),"About Enterprise Groups"]}),e.jsxs("div",{className:"space-y-3 text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Enterprise/Group Companies:"})," These are parent companies that own and manage multiple subsidiary businesses. They provide centralized management, shared resources, and strategic direction for their portfolio of companies."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Subsidiaries:"})," Individual companies that are owned or controlled by a parent company. They operate under the parent's guidance while maintaining their own brand and operations."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Benefits:"})," Group structures allow for better resource allocation, risk management, and strategic planning across multiple business units, plus access to exclusive perks and features."]})]})]})})]})},os=()=>{const{user:t,profile:c}=te(),[o,N]=d.useState([]),[_,C]=d.useState(!0),[a,b]=d.useState(null),[k,l]=d.useState(!1);d.useEffect(()=>{((c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="moderator")&&m()},[c]);const m=async()=>{try{C(!0);const{data:i,error:n}=await O.from("companies").select("*").eq("status","pending").order("created_at",{ascending:!1});if(n)throw n;N(i||[])}catch(i){console.error("Error fetching pending companies:",i),z.error("Failed to fetch pending companies")}finally{C(!1)}},w=async i=>{try{const{error:n}=await O.from("companies").update({status:"active",verification_status:"verified",verification_date:new Date().toISOString(),verified_by:t==null?void 0:t.id}).eq("id",i);if(n)throw n;z.success("Company approved successfully!"),m()}catch(n){console.error("Error approving company:",n),z.error("Failed to approve company")}},h=async i=>{try{const{error:n}=await O.from("companies").update({status:"rejected",verification_status:"rejected"}).eq("id",i);if(n)throw n;z.success("Company rejected"),m()}catch(n){console.error("Error rejecting company:",n),z.error("Failed to reject company")}},S=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return!t||(c==null?void 0:c.role)!=="admin"&&(c==null?void 0:c.role)!=="moderator"?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🔒"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"You need admin or moderator privileges to view pending companies."})]}):_?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading pending companies..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-8 h-8 text-orange-500"}),"Pending Companies"]}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve new company submissions"})]}),e.jsxs(f,{variant:"outline",className:"text-lg px-4 py-2",children:[o.length," Pending"]})]}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsx(j,{children:e.jsxs(p,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Pending Companies"}),e.jsx("p",{className:"text-muted-foreground",children:"All company submissions have been reviewed!"})]})}):o.map(i=>e.jsx(j,{className:"hover:shadow-lg transition-shadow",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg border flex items-center justify-center",style:{backgroundColor:i.primary_color||"#6B7280"},children:e.jsx(E,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:i.name}),e.jsxs(f,{variant:"outline",className:"text-orange-600 border-orange-600",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Pending"]})]}),i.tagline&&e.jsx("p",{className:"text-muted-foreground mb-3",children:i.tagline}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:i.industry})]}),i.business_type&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:i.business_type})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Submitted ",S(i.created_at)]})]}),i.headquarters_world&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:i.headquarters_world})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{b(i),l(!0)},children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Review"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>w(i.id),className:"text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>h(i.id),className:"text-red-600 border-red-600 hover:bg-red-50",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})})},i.id))}),a&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-background rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(E,{className:"w-6 h-6"}),a.name]}),e.jsx(u,{variant:"outline",onClick:()=>l(!1),children:"Close"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(F,{children:e.jsx(A,{className:"text-lg",children:"Basic Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-semibold",children:a.name})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Slug"}),e.jsx("p",{className:"font-mono text-sm",children:a.slug})]}),a.tagline&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Tagline"}),e.jsx("p",{children:a.tagline})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Industry"}),e.jsx("p",{children:a.industry})]}),a.business_type&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Business Type"}),e.jsx("p",{children:a.business_type})]}),a.founded_date&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Founded Date"}),e.jsx("p",{children:S(a.founded_date)})]})]})]}),e.jsxs(j,{children:[e.jsx(F,{children:e.jsx(A,{className:"text-lg",children:"Contact & Location"})}),e.jsxs(p,{className:"space-y-4",children:[a.website_url&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Website"}),e.jsx("a",{href:a.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline block",children:a.website_url})]}),a.email&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:a.email})]}),a.discord_invite&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Discord"}),e.jsx("a",{href:a.discord_invite,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline block",children:"Join Discord"})]}),a.headquarters_world&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"World"}),e.jsx("p",{children:a.headquarters_world})]}),a.headquarters_coords&&e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Coordinates"}),e.jsx("p",{className:"font-mono text-sm",children:a.headquarters_coords})]})]})]}),a.description&&e.jsxs(j,{className:"lg:col-span-2",children:[e.jsx(F,{children:e.jsx(A,{className:"text-lg",children:"Description"})}),e.jsx(p,{children:e.jsx(ne,{content:a.description})})]}),e.jsxs(j,{className:"lg:col-span-2",children:[e.jsx(F,{children:e.jsx(A,{className:"text-lg",children:"Additional Details"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Max Members"}),e.jsx("p",{children:a.max_members||"Unlimited"})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:a.primary_color||"#6B7280"}}),e.jsx("span",{className:"font-mono text-sm",children:a.primary_color})]})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:a.secondary_color||"#6B7280"}}),e.jsx("span",{className:"font-mono text-sm",children:a.secondary_color})]})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Submitted"}),e.jsx("p",{className:"text-sm",children:S(a.created_at)})]})]}),a.keywords.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.keywords.map((i,n)=>e.jsx(f,{variant:"outline",className:"text-xs",children:i},n))})]}),a.tags.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map((i,n)=>e.jsx(f,{variant:"outline",className:"text-xs",children:i},n))})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[e.jsx(u,{variant:"outline",onClick:()=>l(!1),children:"Close"}),e.jsxs(u,{variant:"outline",onClick:()=>h(a.id),className:"text-red-600 border-red-600 hover:bg-red-50",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Reject"]}),e.jsxs(u,{onClick:()=>w(a.id),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Approve Company"]})]})]})})})]})},ms=()=>{const t=le(),{user:c,profile:o}=te(),[N,_]=d.useState([]),[C,a]=d.useState(!0),[b,k]=d.useState(null),[l,m]=d.useState(""),[w,h]=d.useState("all"),[S,i]=d.useState("name"),[n,q]=d.useState("active");d.useEffect(()=>{M()},[n]);const M=async()=>{try{a(!0),k(null);const{data:s,error:x}=await O.from("companies").select(`
          *,
          shops:shops(
            id,
            item_type,
            item_display_name,
            price,
            type,
            stock,
            unlimited,
            world,
            x,
            y,
            z,
            last_updated
          )
        `).eq("is_public",!0).eq("status",n).order("is_featured",{ascending:!1});if(x)throw x;_(s||[])}catch(s){console.error("Error fetching companies:",s),k(s instanceof Error?s.message:"Failed to fetch companies")}finally{a(!1)}},B=N.filter(s=>{const x=s.name.toLowerCase().includes(l.toLowerCase())||s.tagline&&s.tagline.toLowerCase().includes(l.toLowerCase())||s.industry&&s.industry.toLowerCase().includes(l.toLowerCase()),D=w==="all"||s.industry===w;return x&&D}).sort((s,x)=>{switch(S){case"name":return s.name.localeCompare(x.name);case"rating":return x.average_rating-s.average_rating;case"revenue":return x.total_revenue-s.total_revenue;case"members":return x.member_count-s.member_count;case"created":return new Date(x.created_at).getTime()-new Date(s.created_at).getTime();default:return 0}}),I=[...new Set(N.map(s=>s.industry).filter(Boolean))].sort(),Y=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),K=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return C?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading business listings..."})]})}):b?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Businesses"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:b}),e.jsx(u,{onClick:M,variant:"outline",children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:c&&e.jsx(ae,{onCompanyCreated:M,isAdmin:(o==null?void 0:o.role)==="admin"||(o==null?void 0:o.role)==="moderator"})}),e.jsxs(ve,{value:n,onValueChange:s=>q(s),children:[e.jsxs(be,{className:"grid w-full grid-cols-2",children:[e.jsxs(G,{value:"active",className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Active Companies",e.jsx(f,{variant:"secondary",className:"ml-1",children:N.filter(s=>s.status==="active").length})]}),((o==null?void 0:o.role)==="admin"||(o==null?void 0:o.role)==="moderator")&&e.jsxs(G,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Pending Review",e.jsx(f,{variant:"secondary",className:"ml-1",children:N.filter(s=>s.status==="pending").length})]})]}),e.jsxs(V,{value:"active",className:"space-y-6",children:[e.jsx(j,{className:"bg-card/50 backdrop-blur-sm border-border",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(ie,{placeholder:"Search companies, industries, or descriptions...",value:l,onChange:s=>m(s.target.value),className:"pl-10 h-12 text-lg"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs($,{value:w,onValueChange:h,children:[e.jsx(U,{className:"w-40",children:e.jsx(H,{})}),e.jsxs(Q,{children:[e.jsx(y,{value:"all",children:"All Industries"}),I.map(s=>e.jsx(y,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs($,{value:S,onValueChange:s=>i(s),children:[e.jsx(U,{className:"w-32",children:e.jsx(H,{})}),e.jsxs(Q,{children:[e.jsx(y,{value:"name",children:"Name"}),e.jsx(y,{value:"rating",children:"Rating"}),e.jsx(y,{value:"revenue",children:"Revenue"}),e.jsx(y,{value:"members",children:"Members"}),e.jsx(y,{value:"created",children:"Newest"})]})]})]})]})]})})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",B.length," of ",N.length," companies"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(s=>{var x;return e.jsxs(j,{className:"group hover:shadow-xl transition-all duration-300 border-border bg-card/50 backdrop-blur-sm hover:bg-card/80",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.logo_url?e.jsx("img",{src:s.logo_url,alt:s.name,className:"w-12 h-12 rounded-lg object-cover border"}):e.jsx("div",{className:"w-12 h-12 rounded-lg border flex items-center justify-center",style:{backgroundColor:s.primary_color||"#6B7280"},children:e.jsx(E,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(A,{className:"text-lg truncate group-hover:text-primary transition-colors cursor-pointer",onClick:()=>t(`/company/${s.slug}`),children:s.name}),s.tagline&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.tagline})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.is_featured&&e.jsxs(f,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Featured"]}),s.verification_status==="verified"&&e.jsxs(f,{variant:"outline",className:"text-green-600 border-green-600 text-xs",children:[e.jsx($e,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.industry&&e.jsx(f,{variant:"outline",className:"text-xs",children:s.industry}),s.business_type&&e.jsx(f,{variant:"outline",className:"text-xs",children:s.business_type})]})]})}),e.jsxs(p,{className:"space-y-4",children:[s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:e.jsx(ne,{content:s.description})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-primary",children:s.member_count}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Members"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-primary",children:((x=s.shops)==null?void 0:x.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shops"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-primary",children:Y(s.total_revenue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-primary",children:s.average_rating.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rating"})]})]}),s.headquarters_world&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:s.headquarters_world}),s.headquarters_coords&&e.jsxs("span",{className:"text-xs",children:["(",s.headquarters_coords,")"]})]}),s.founded_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Founded ",K(s.founded_date)]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:s.website_url&&e.jsx(u,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.website_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Website"]})})})]})]},s.id)})}),B.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏢"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Companies Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:l?`No companies match "${l}"`:"No companies available at the moment"}),e.jsx(u,{onClick:M,variant:"outline",children:"Refresh"})]})]}),e.jsx(V,{value:"pending",className:"space-y-6",children:e.jsx(os,{})})]})]})},xs=()=>e.jsx(ms,{}),pe=({shop:t,formatPrice:c,formatLastUpdated:o,onToggleFavorite:N,isFavorite:_})=>{const C=le(),[a,b]=d.useState(1),k=()=>{C(`/shop/${t.id}`)},l=n=>{n.stopPropagation(),N(t.id)},m=t.unlimited?999:t.stock,w=a*t.price,h=n=>{const q=Math.max(1,Math.min(n,m));b(q)},S=()=>{h(a+1)},i=()=>{h(a-1)};return e.jsx(j,{className:"group hover:shadow-lg transition-all duration-300 border-border",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"group relative",children:[e.jsx(Ke,{itemType:t.item_type,size:"2xl"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:[he(t.item_type,t.item_display_name),t.item_custom_model_data&&` (Model #${t.item_custom_model_data})`]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold truncate group-hover:text-primary transition-colors",children:he(t.item_type,t.item_display_name)}),e.jsxs(f,{className:`${Xe(t.type)} text-white`,children:[t.type==="buy"?e.jsx(_e,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1",children:t.type==="buy"?"BUYING":"SELLING"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Price:"}),e.jsx("span",{className:"ml-2 font-semibold text-primary",children:c(t.price)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Stock:"}),e.jsx("span",{className:`ml-2 font-medium ${Ze(t.stock,t.unlimited)}`,children:es(t.stock,t.unlimited)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.item_amount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Owner:"}),e.jsx("span",{className:"ml-2 font-medium truncate",children:t.owner_uuid})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsxs("span",{children:[ss(t.world)," (",as(t.x,t.y,t.z),")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{children:o(t.last_updated)})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-muted/30 p-2 rounded border",children:[e.jsx(Ye,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:i,disabled:a<=1,className:"w-6 h-6 p-0",children:e.jsx(ts,{className:"w-3 h-3"})}),e.jsx(ie,{type:"number",value:a,onChange:n=>h(parseInt(n.target.value)||1),min:1,max:m,className:"w-16 text-center h-8"}),e.jsx(u,{variant:"outline",size:"sm",onClick:S,disabled:a>=m,className:"w-6 h-6 p-0",children:e.jsx(Ue,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-primary",children:c(w)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a," × ",c(t.price)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:k,children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Details"]}),e.jsx(u,{variant:_(t.id)?"default":"outline",size:"sm",onClick:l,children:e.jsx(He,{className:`w-4 h-4 ${_(t.id)?"fill-current":""}`})})]})]})]})})})},hs=()=>{const{shops:t,loading:c,error:o,lastSync:N,fetchShopsByType:_,fetchShopsByItem:C,refreshShops:a}=Je(),[b,k]=d.useState(""),[l,m]=d.useState("all");d.useState(!1),d.useState(()=>{const r=localStorage.getItem("favoriteShops");return r?new Set(JSON.parse(r)):new Set});const[w,h]=d.useState("recent"),[S,i]=d.useState("grid"),[n,q]=d.useState("all"),[M,B]=d.useState(50),[I,Y]=d.useState(!1),K=d.useMemo(()=>["all",...[...new Set(t.map(g=>g.item_type))].sort()],[t]),s=d.useMemo(()=>{let r=t.filter(g=>{const T=ue(b,g.item_type)||g.item_display_name&&ue(b,g.item_display_name)||g.owner_uuid.toLowerCase().includes(b.toLowerCase()),X=l==="all"||g.type===l,Z=n==="all"||g.item_type===n,ee=!I||g.stock>0;return T&&X&&Z&&ee});return r.sort((g,T)=>{if(g.is_featured&&!T.is_featured)return-1;if(!g.is_featured&&T.is_featured)return 1;switch(w){case"recent":return T.last_updated-g.last_updated;case"price-low":return g.price-T.price;case"price-high":return T.price-g.price;case"name":return(g.item_display_name||g.item_type).localeCompare(T.item_display_name||T.item_type);default:return 0}}),r},[t,b,l,w,n,I]),x=s.slice(0,M),D=d.useMemo(()=>{const r=t.length,g=t.filter(L=>L.type==="buy").length,T=t.filter(L=>L.type==="sell").length,X=t.filter(L=>L.is_featured).length,Z=t.reduce((L,ce)=>L+ce.price*ce.stock,0),ee=new Set(t.map(L=>L.item_type)).size,Ee=new Set(t.map(L=>L.owner_uuid)).size;return{totalShops:r,buyShops:g,sellShops:T,featuredShops:X,totalValue:Z,uniqueItems:ee,activeOwners:Ee}},[t]),ke=r=>{m(r),B(50),r!=="all"?_(r):a()},Te=r=>{q(r),B(50),r!=="all"?C(r):a()},Le=()=>{B(r=>r+50)};return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading shops..."})]})}):o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Shops"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:o}),e.jsxs(u,{onClick:a,variant:"outline",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Try Again"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[e.jsx(j,{className:"bg-card/50 border-border",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:D.totalShops}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Shops"})]})]})})}),e.jsx(j,{className:"bg-card/50 border-border",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:D.buyShops}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Buying"})]})]})})}),e.jsx(j,{className:"bg-card/50 border-border",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:D.sellShops}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Selling"})]})]})})}),e.jsx(j,{className:"bg-card/50 border-border",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:P(D.totalValue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Value"})]})]})})}),e.jsx(j,{className:"bg-card/50 border-border",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:D.uniqueItems}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items"})]})]})})})]}),e.jsx(j,{className:"bg-card/50 backdrop-blur-sm border-border",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(ie,{placeholder:"Search items, owners, or descriptions...",value:b,onChange:r=>k(r.target.value),className:"pl-10 h-12 text-lg"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs($,{value:l,onValueChange:r=>ke(r),children:[e.jsx(U,{className:"w-32",children:e.jsx(H,{})}),e.jsxs(Q,{children:[e.jsx(y,{value:"all",children:"All Types"}),e.jsx(y,{value:"buy",children:"Buying Shops"}),e.jsx(y,{value:"sell",children:"Selling Shops"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hide-empty-shops",checked:I,onChange:r=>Y(r.target.checked),className:"accent-primary w-4 h-4"}),e.jsx("label",{htmlFor:"hide-empty-shops",className:"text-sm text-muted-foreground select-none",children:"Hide Empty Shops"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs($,{value:n,onValueChange:Te,children:[e.jsx(U,{className:"w-40",children:e.jsx(H,{})}),e.jsx(Q,{children:K.map(r=>e.jsx(y,{value:r,children:r==="all"?"All Categories":r},r))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs($,{value:w,onValueChange:r=>h(r),children:[e.jsx(U,{className:"w-32",children:e.jsx(H,{})}),e.jsxs(Q,{children:[e.jsx(y,{value:"recent",children:"Recent"}),e.jsx(y,{value:"price-low",children:"Price Low"}),e.jsx(y,{value:"price-high",children:"Price High"}),e.jsx(y,{value:"name",children:"Name"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx(u,{variant:S==="grid"?"default":"outline",size:"sm",onClick:()=>i("grid"),children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx(u,{variant:S==="list"?"default":"outline",size:"sm",onClick:()=>i("list"),children:e.jsx(ls,{className:"w-4 h-4"})})]})]})]})})}),D.featuredShops>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-amber-500"}),e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Featured Shops"}),e.jsxs(f,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-950 dark:text-amber-300 dark:border-amber-800",children:[D.featuredShops," featured"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.filter(r=>r.is_featured).slice(0,8).map(r=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:e.jsxs(f,{className:"bg-amber-500 text-white border-0 shadow-lg",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Featured"]})}),S==="grid"?e.jsx(xe,{shop:r,formatPrice:P,formatLastUpdated:R}):e.jsx(pe,{shop:r,formatPrice:P,formatLastUpdated:R})]},r.id))}),x.filter(r=>r.is_featured).length>8&&e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing 8 of ",x.filter(r=>r.is_featured).length," featured shops"]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",x.length," of ",s.length," shops",s.length>x.length&&` (${s.length-x.length} more available)`]}),N&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",R(N.getTime())]})]}),S==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(r=>e.jsx(xe,{shop:r,formatPrice:P,formatLastUpdated:R},r.id))}):e.jsx("div",{className:"space-y-4",children:x.map(r=>e.jsx(pe,{shop:r,formatPrice:P,formatLastUpdated:R},r.id))}),s.length>x.length&&e.jsx("div",{className:"flex justify-center pt-6",children:e.jsxs(u,{onClick:Le,variant:"outline",size:"lg",className:"px-8",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Load More Shops (",Math.min(50,s.length-x.length)," more)"]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏪"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Shops Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:b?`No shops match "${b}"`:"No shops available at the moment"}),e.jsxs(u,{onClick:a,variant:"outline",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})},Ms=()=>{const t=Oe(),c=le(),o=()=>t.pathname==="/markets/groups"?"groups":t.pathname==="/markets/businesses"?"businesses":(t.pathname==="/markets/shops","shops"),[N,_]=d.useState(o()),C=a=>{switch(_(a),a){case"groups":c("/markets/groups");break;case"businesses":c("/markets/businesses");break;case"shops":c("/markets/shops");break}};return e.jsx("div",{className:"min-h-[100vh] bg-background py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(ve,{value:N,onValueChange:a=>C(a),className:"w-full",children:[e.jsxs(be,{className:"flex justify-center gap-2 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-xl p-1 w-full max-w-2xl mx-auto border border-orange-200 dark:border-orange-800 shadow-lg",children:[e.jsxs(G,{value:"shops",className:"flex items-center gap-2 px-6 py-3 rounded-lg text-base font-semibold data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:scale-105",children:[e.jsx(ye,{className:"w-4 h-4"}),"Shops"]}),e.jsxs(G,{value:"businesses",className:"flex items-center gap-2 px-6 py-3 rounded-lg text-base font-semibold data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:scale-105",children:[e.jsx(E,{className:"w-4 h-4"}),"Business Listings"]}),e.jsxs(G,{value:"groups",className:"flex items-center gap-2 px-6 py-3 rounded-lg text-base font-semibold data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-500 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-300 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:scale-105",children:[e.jsx(ns,{className:"w-4 h-4"}),"Enterprises"]})]}),e.jsx(V,{value:"shops",className:"mt-6",children:e.jsx(hs,{})}),e.jsx(V,{value:"businesses",className:"mt-6",children:e.jsx(xs,{})}),e.jsx(V,{value:"groups",className:"mt-6",children:e.jsx(cs,{})})]})})})})};export{Ms as default};
