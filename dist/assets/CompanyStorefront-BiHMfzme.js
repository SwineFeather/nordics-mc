import{ba as N,r as t,j as e,v as c,L as m,aA as b,B as x,w as u,x as h,y as p,z as j,bj as v,s as _}from"./index-DUDTAd9W.js";import{S as w}from"./ShopCard-B0OjRyjM.js";import{e as C,h as S}from"./MinecraftItemImage-7iriaiIY.js";import{A as f}from"./arrow-left-BF2Td8_J.js";import"./minus-BIL9MBfk.js";import"./trending-up-obebY5n1.js";const T=()=>{const{slug:r}=N(),[s,g]=t.useState(null),[y,l]=t.useState(!0),[n,d]=t.useState(null);return t.useEffect(()=>{(async()=>{if(r){l(!0),d(null);try{const{data:a,error:o}=await _.from("companies").select(`
            *,
            shops:shops(
              id, owner_uuid, world, x, y, z,
              item_type, item_amount, item_durability, item_display_name,
              item_lore, item_enchants, item_custom_model_data, item_unbreakable,
              price, type, stock, unlimited, last_updated, description, company_id, is_featured
            )
          `).eq("slug",r).eq("status","active").single();if(o)throw o;g(a||null)}catch(a){d((a==null?void 0:a.message)||"Failed to load company")}finally{l(!1)}}})()},[r]),y?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n||!s?e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-10 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ¬"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Company Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:n||"This company is unavailable."}),e.jsx(c,{asChild:!0,variant:"outline",children:e.jsxs(m,{to:"/nsi",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Back to NSI"]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 w-full rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${s.primary_color||"#1E40AF"}20, ${s.secondary_color||"#F59E0B"}20)`},children:s.banner_url?e.jsx("img",{src:s.banner_url,alt:`${s.name} banner`,className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome to ",s.name]})]})}),e.jsx("div",{className:"ml-0 md:ml-48 pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",children:s.name}),s.tagline&&e.jsx("p",{className:"text-muted-foreground mb-2",children:s.tagline}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.industry&&e.jsx(x,{variant:"outline",children:s.industry}),s.business_type&&e.jsx(x,{variant:"outline",children:s.business_type})]})]}),e.jsx("div",{children:e.jsx(c,{asChild:!0,variant:"outline",children:e.jsxs(m,{to:"/nsi",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"NSI Home"]})})})]})})]}),s.description&&e.jsxs(u,{children:[e.jsx(h,{children:e.jsx(p,{children:"About"})}),e.jsx(j,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"})," Shops"]})}),e.jsx(j,{children:s.shops&&s.shops.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.shops.map(i=>e.jsx(w,{shop:i,formatPrice:C,formatLastUpdated:S,onToggleFavorite:()=>{},isFavorite:()=>!1},i.id))}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"No shops listed yet."})})]})]})};export{T as default};
