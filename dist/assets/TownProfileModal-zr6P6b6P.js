import{I as f,u as y,r as c,j as e,o as v,p as b,q as w,t as C,aA as M,B as l,bc as T,G as D,Q as U,U as k,F as S,v as t,M as P,H as L,bg as m,aD as d}from"./index-DUDTAd9W.js";import{D as R,C as G,T as I}from"./TownPhotoGallery-PMBfHPkL.js";import{T as A}from"./TownProfilePicture-DhHVfOeY.js";import{C as B}from"./coins-DnpU2Pgu.js";import{U as E}from"./user-plus-C6bBkbaX.js";import{E as z}from"./external-link-BIoP0QEd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=f("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Q=({town:s,isOpen:x,onClose:i})=>{const p=y(),[n,g]=c.useState(!0),[r,h]=c.useState(!0),u=a=>{try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Unknown"}},j=a=>({"Metropolis (Capital)":"bg-purple-500","Large Town (Capital)":"bg-blue-500","City (Capital)":"bg-indigo-500","Town (Capital)":"bg-cyan-500","Commune (Capital)":"bg-green-500",Metropolis:"bg-purple-500","Large Town":"bg-blue-500",City:"bg-indigo-500",Town:"bg-cyan-500",Settlement:"bg-green-500","Independent Town":"bg-gray-500","Independent Settlement":"bg-gray-500"})[a]||"bg-gray-500",N=a=>({"Royal City":"bg-purple-500",Open:"bg-green-500",Active:"bg-blue-500",Rebuilding:"bg-yellow-500"})[a]||"bg-gray-500";return e.jsx(v,{open:x,onOpenChange:i,children:e.jsxs(b,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:s.name})]}),e.jsx(l,{className:j(s.type),children:s.type}),e.jsx(l,{className:N(s.status),children:s.status})]}),e.jsxs(T,{children:["A detailed view of ",s.name," and its community"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{townName:s.name,className:"h-20 w-20 rounded-full object-cover",imageUrl:s.image_url}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(l,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),"Mayor:",e.jsx("button",{className:"font-medium hover:underline text-left ml-1",onClick:()=>{window.location.href=`/community?player=${encodeURIComponent(s.mayor)}`},children:s.mayor})]}),s.nation&&e.jsxs(l,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),s.nation.name]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Population:"}),e.jsx("span",{className:"font-medium",children:s.population})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Founded:"}),e.jsx("span",{className:"font-medium",children:u(s.founded)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Balance:"}),e.jsxs("span",{className:"font-medium",children:["â‚¬",(s.balance||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(t,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Request to Join"]}),e.jsxs(t,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Message Mayor"]}),e.jsxs(t,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Copy Link"]}),e.jsxs(t,{variant:"default",className:"flex items-center gap-2",onClick:()=>{p(`/town/${encodeURIComponent(s.name)}`),i()},children:[e.jsx(F,{className:"w-4 h-4"}),"Full Page"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors",onClick:()=>g(!n),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Live Map View"})]}),n?e.jsx(m,{className:"w-4 h-4"}):e.jsx(d,{className:"w-4 h-4"})]}),n&&e.jsx(R,{townName:s.name,coordinates:{x:s.location_x??1708,z:s.location_z??7549},className:"w-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors",onClick:()=>h(!r),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Photo Gallery"})]}),r?e.jsx(m,{className:"w-4 h-4"}):e.jsx(d,{className:"w-4 h-4"})]}),r&&e.jsx(I,{townName:s.name})]})]})]})})};export{Q as T};
