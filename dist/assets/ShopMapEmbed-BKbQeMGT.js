import{r as l,j as s,w as v,x as g,Q as C,y,v as a,H as r,bn as z,bo as E,z as $}from"./index-DUDTAd9W.js";import{E as o}from"./external-link-BIoP0QEd.js";import{L}from"./loader-circle-DMK_EDKw.js";const S=({shopName:i,coordinates:e,world:d,className:x=""})=>{const[t,p]=l.useState(!1),[h,n]=l.useState(!0),[j,u]=l.useState(!1),c=`https://map.nordics.world/#${d}:${e.x}:${e.y}:${e.z}:1000:0:0:0:1:flat`,N=()=>{n(!1)},f=()=>{n(!1),u(!0)},m=()=>{window.open(c,"_blank")},b=()=>{const w=`${e.x}, ${e.y}, ${e.z}`;navigator.clipboard.writeText(w)};return s.jsxs(v,{className:`overflow-hidden ${x}`,children:[s.jsx(g,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{className:"w-5 h-5 text-primary"}),s.jsx(y,{className:"text-lg",children:"Live Map View"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(a,{variant:"outline",size:"sm",onClick:b,className:"text-xs",children:[s.jsx(r,{className:"w-3 h-3 mr-1"}),"Copy Coords"]}),s.jsxs(a,{variant:"outline",size:"sm",onClick:m,className:"text-xs",children:[s.jsx(o,{className:"w-3 h-3 mr-1"}),"Open Full Map"]}),s.jsx(a,{variant:"outline",size:"sm",onClick:()=>p(!t),className:"text-xs",children:t?s.jsx(z,{className:"w-3 h-3"}):s.jsx(E,{className:"w-3 h-3"})})]})]})}),s.jsx($,{className:"p-0",children:s.jsxs("div",{className:"relative",children:[h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 z-10",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{className:"text-sm",children:"Loading map..."})]})}),j&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 z-10",children:s.jsxs("div",{className:"text-center p-4",children:[s.jsx(r,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Unable to load map view"}),s.jsxs(a,{variant:"outline",size:"sm",onClick:m,children:[s.jsx(o,{className:"w-3 h-3 mr-1"}),"Open in New Tab"]})]})}),s.jsx("div",{className:`relative bg-muted/20 transition-all duration-300 ${t?"h-[600px]":"h-64"}`,children:s.jsx("iframe",{src:c,title:`${i} on Nordics World Map`,className:"w-full h-full border-0",onLoad:N,onError:f,sandbox:"allow-scripts allow-same-origin allow-forms",loading:"lazy"})}),s.jsx("div",{className:"absolute bottom-2 left-2 bg-background/90 backdrop-blur-sm rounded-lg px-3 py-2 border text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r,{className:"w-3 h-3 text-primary"}),s.jsx("span",{className:"font-medium",children:i})]})})]})})]})};export{S};
