import{r as a,s as U,c as Be,a as me,j as e,A as We,P as ze,b as R,d as Ve,e as De,D as $e,C as Te,f as Ge,g as Xe,R as Ye,h as Je,i as oe,k as qe,l as Y,m as J,n as q,B as M,o as Ke,p as Ze,q as Qe,t as et,v as I,M as tt,u as xe,N as st,w as K,x as rt,y as nt,z as Z,E as ae,F as ot,L as at,G as it,U as lt,H as ct}from"./index-BDwxLbfg.js";import{B as dt,V as w,F as mt,u as xt,a as ut,N as ie,C as le,b as ht,M as ce,T as ft,c as pt}from"./react-three-fiber.esm-CgNEu4wh.js";import{u as gt}from"./use-toast-IlxM9Ntm.js";import{C as vt}from"./copy-D3RDa5qZ.js";import{E as bt}from"./external-link-DMGOVlse.js";import{A as ue}from"./arrow-right-BIPZkJnA.js";import{F as he}from"./flag-B2VYutx4.js";import{L as de}from"./loader-circle-BQXbm3ye.js";import{B as wt}from"./building-nraDPmQ5.js";const jt=()=>{const[s,t]=a.useState(null),[o,l]=a.useState(!0);return a.useEffect(()=>{const d=async()=>{var p,i,c,x,m;try{const g=await(await fetch("https://api.mcsrvstat.us/3/nordics.world")).json();g.online!==void 0?t({online:g.online||!1,players:{online:((p=g.players)==null?void 0:p.online)||0,max:((i=g.players)==null?void 0:i.max)||0,list:((c=g.players)==null?void 0:c.list)||[]},version:g.version||"",motd:((m=(x=g.motd)==null?void 0:x.clean)==null?void 0:m[0])||"Welcome to Nordics Minecraft Server!"}):t({online:!0,players:{online:0,max:0,list:[]},version:"Unknown",motd:"Error fetching server status."})}catch(u){console.error("Failed to fetch server status:",u),t({online:!0,players:{online:247,max:500,list:[]},version:"1.21",motd:"Welcome to Nordics Minecraft Server!"})}finally{l(!1)}};d();const r=setInterval(d,18e4);return()=>clearInterval(r)},[]),{status:s,loading:o}},yt=()=>{const[s,t]=a.useState([]),[o,l]=a.useState(!0),[d,r]=a.useState(null);return a.useEffect(()=>{(async()=>{try{l(!0);const{data:i,error:c}=await U.from("towns").select("id, name, location_x, location_z, is_capital, nation_name, balance").not("location_x","is",null).not("location_z","is",null).order("name");if(c){console.error("Error fetching town locations:",c),r(c.message);return}t(i||[])}catch(i){console.error("Error in useTownLocations:",i),r("Failed to fetch town locations")}finally{l(!1)}})()},[]),{towns:s,loading:o,error:d}};var X,Q="HoverCard",[fe,es]=Be(Q,[me]),T=me(),[Nt,ee]=fe(Q),pe=s=>{const{__scopeHoverCard:t,children:o,open:l,defaultOpen:d,onOpenChange:r,openDelay:p=700,closeDelay:i=300}=s,c=T(t),x=a.useRef(0),m=a.useRef(0),u=a.useRef(!1),g=a.useRef(!1),[j=!1,f]=Xe({prop:l,defaultProp:d,onChange:r}),n=a.useCallback(()=>{clearTimeout(m.current),x.current=window.setTimeout(()=>f(!0),p)},[p,f]),b=a.useCallback(()=>{clearTimeout(x.current),!u.current&&!g.current&&(m.current=window.setTimeout(()=>f(!1),i))},[i,f]),y=a.useCallback(()=>f(!1),[f]);return a.useEffect(()=>()=>{clearTimeout(x.current),clearTimeout(m.current)},[]),e.jsx(Nt,{scope:t,open:j,onOpenChange:f,onOpen:n,onClose:b,onDismiss:y,hasSelectionRef:u,isPointerDownOnContentRef:g,children:e.jsx(Ye,{...c,children:o})})};pe.displayName=Q;var ge="HoverCardTrigger",ve=a.forwardRef((s,t)=>{const{__scopeHoverCard:o,...l}=s,d=ee(ge,o),r=T(o);return e.jsx(We,{asChild:!0,...r,children:e.jsx(ze.a,{"data-state":d.open?"open":"closed",...l,ref:t,onPointerEnter:R(s.onPointerEnter,$(d.onOpen)),onPointerLeave:R(s.onPointerLeave,$(d.onClose)),onFocus:R(s.onFocus,d.onOpen),onBlur:R(s.onBlur,d.onClose),onTouchStart:R(s.onTouchStart,p=>p.preventDefault())})})});ve.displayName=ge;var kt="HoverCardPortal",[ts,Ct]=fe(kt,{forceMount:void 0}),D="HoverCardContent",be=a.forwardRef((s,t)=>{const o=Ct(D,s.__scopeHoverCard),{forceMount:l=o.forceMount,...d}=s,r=ee(D,s.__scopeHoverCard);return e.jsx(Ve,{present:l||r.open,children:e.jsx(St,{"data-state":r.open?"open":"closed",...d,onPointerEnter:R(s.onPointerEnter,$(r.onOpen)),onPointerLeave:R(s.onPointerLeave,$(r.onClose)),ref:t})})});be.displayName=D;var St=a.forwardRef((s,t)=>{const{__scopeHoverCard:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:r,onInteractOutside:p,...i}=s,c=ee(D,o),x=T(o),m=a.useRef(null),u=De(t,m),[g,j]=a.useState(!1);return a.useEffect(()=>{if(g){const f=document.body;return X=f.style.userSelect||f.style.webkitUserSelect,f.style.userSelect="none",f.style.webkitUserSelect="none",()=>{f.style.userSelect=X,f.style.webkitUserSelect=X}}},[g]),a.useEffect(()=>{if(m.current){const f=()=>{j(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var b;((b=document.getSelection())==null?void 0:b.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",f),()=>{document.removeEventListener("pointerup",f),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),a.useEffect(()=>{m.current&&Et(m.current).forEach(n=>n.setAttribute("tabindex","-1"))}),e.jsx($e,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:p,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:R(r,f=>{f.preventDefault()}),onDismiss:c.onDismiss,children:e.jsx(Te,{...x,...i,onPointerDown:R(i.onPointerDown,f=>{f.currentTarget.contains(f.target)&&j(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:u,style:{...i.style,userSelect:g?"text":void 0,WebkitUserSelect:g?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),_t="HoverCardArrow",Rt=a.forwardRef((s,t)=>{const{__scopeHoverCard:o,...l}=s,d=T(o);return e.jsx(Ge,{...d,...l,ref:t})});Rt.displayName=_t;function $(s){return t=>t.pointerType==="touch"?void 0:s()}function Et(s){const t=[],o=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;o.nextNode();)t.push(o.currentNode);return t}var Lt=pe,Mt=ve,we=be;const Pt=Lt,Ot=Mt,je=a.forwardRef(({className:s,align:t="center",sideOffset:o=4,...l},d)=>e.jsx(we,{ref:d,align:t,sideOffset:o,className:Je("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l}));je.displayName=we.displayName;const C=.0625,v={head:{width:8,height:8,depth:8,y:20},body:{width:8,height:12,depth:4,y:12},armRight:{width:4,height:12,depth:4,x:-6,y:12},armLeft:{width:4,height:12,depth:4,x:6,y:12},legRight:{width:4,height:12,depth:4,x:-2,y:0},legLeft:{width:4,height:12,depth:4,x:2,y:0}},h=(s,t,o,l)=>({x:s/64,y:t/64,width:o/64,height:l/64}),O={head:{front:h(8,8,8,8),back:h(24,8,8,8),right:h(0,8,8,8),left:h(16,8,8,8),top:h(8,0,8,8),bottom:h(16,0,8,8)},body:{front:h(20,20,8,12),back:h(32,20,8,12),right:h(16,20,4,12),left:h(28,20,4,12),top:h(20,16,8,4),bottom:h(28,16,8,4)},armRight:{front:h(44,20,4,12),back:h(52,20,4,12),right:h(40,20,4,12),left:h(48,20,4,12),top:h(44,16,4,4),bottom:h(48,16,4,4)},armLeft:{front:h(36,52,4,12),back:h(44,52,4,12),right:h(32,52,4,12),left:h(40,52,4,12),top:h(36,48,4,4),bottom:h(40,48,4,4)},legRight:{front:h(4,20,4,12),back:h(12,20,4,12),right:h(0,20,4,12),left:h(8,20,4,12),top:h(4,16,4,4),bottom:h(8,16,4,4)},legLeft:{front:h(20,52,4,12),back:h(28,52,4,12),right:h(16,52,4,12),left:h(24,52,4,12),top:h(20,48,4,4),bottom:h(24,48,4,4)}},H=(s,t,o,l)=>{const d=new dt(s*C,t*C,o*C),r=[],p=l.right;r.push(new w(p.x,p.y),new w(p.x+p.width,p.y),new w(p.x,p.y+p.height),new w(p.x+p.width,p.y+p.height));const i=l.left;r.push(new w(i.x+i.width,i.y),new w(i.x,i.y),new w(i.x+i.width,i.y+i.height),new w(i.x,i.y+i.height));const c=l.top;r.push(new w(c.x,c.y+c.height),new w(c.x+c.width,c.y+c.height),new w(c.x,c.y),new w(c.x+c.width,c.y));const x=l.bottom;r.push(new w(x.x,x.y),new w(x.x+x.width,x.y),new w(x.x,x.y+x.height),new w(x.x+x.width,x.y+x.height));const m=l.front;r.push(new w(m.x,m.y),new w(m.x+m.width,m.y),new w(m.x,m.y+m.height),new w(m.x+m.width,m.y+m.height));const u=l.back;return r.push(new w(u.x+u.width,u.y),new w(u.x,u.y),new w(u.x+u.width,u.y+u.height),new w(u.x,u.y+u.height)),d.setAttribute("uv",new mt(r.flatMap(g=>[g.x,g.y]),2)),d},Ht=({playerName:s})=>{const t=a.useRef(null),[o,l]=a.useState(!1),[d,r]=a.useState({x:0,y:0}),[p,i]=a.useState(!0),{gl:c}=xt(),x=ut(ft,`https://mc-heads.net/skin/${s}`);a.useEffect(()=>{x&&(x.magFilter=ie,x.minFilter=ie,x.flipY=!1,x.wrapS=le,x.wrapT=le)},[x]),a.useEffect(()=>{const u=()=>{l(!0),i(!1)},g=n=>{o&&r(b=>({x:b.x+n.movementY*.01,y:b.y+n.movementX*.01}))},j=()=>{l(!1),setTimeout(()=>i(!0),2e3)},f=c.domElement;return f.addEventListener("mousedown",u),window.addEventListener("mousemove",g),window.addEventListener("mouseup",j),()=>{f.removeEventListener("mousedown",u),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",j)}},[o,c.domElement]),ht(u=>{t.current&&(p&&!o?(t.current.rotation.y=Math.sin(u.clock.elapsedTime*.3)*.5,t.current.rotation.x=Math.cos(u.clock.elapsedTime*.2)*.1):(t.current.rotation.x=d.x,t.current.rotation.y=d.y))});const m=x?new ce({map:x,transparent:!0,alphaTest:.5}):new ce({color:"#8B4513"});return e.jsxs("group",{ref:t,position:[0,-.6,0],children:[e.jsx("mesh",{position:[0,v.head.y*C+.0625,0],geometry:H(v.head.width,v.head.height,v.head.depth,O.head),material:m}),e.jsx("mesh",{position:[0,v.body.y*C,0],geometry:H(v.body.width,v.body.height,v.body.depth,O.body),material:m}),e.jsx("mesh",{position:[v.armRight.x*C,v.armRight.y*C,0],geometry:H(v.armRight.width,v.armRight.height,v.armRight.depth,O.armRight),material:m}),e.jsx("mesh",{position:[v.armLeft.x*C,v.armLeft.y*C,0],geometry:H(v.armLeft.width,v.armLeft.height,v.armLeft.depth,O.armLeft),material:m}),e.jsx("mesh",{position:[v.legRight.x*C,v.legRight.y*C,0],geometry:H(v.legRight.width,v.legRight.height,v.legRight.depth,O.legRight),material:m}),e.jsx("mesh",{position:[v.legLeft.x*C,v.legLeft.y*C,0],geometry:H(v.legLeft.width,v.legLeft.height,v.legLeft.depth,O.legLeft),material:m})]})},Ft=({children:s,fallback:t})=>{const[o,l]=oe.useState(!1);return oe.useEffect(()=>{const d=r=>{console.error("3D Scene Error:",r),l(!0)};return window.addEventListener("error",d),()=>window.removeEventListener("error",d)},[]),o?e.jsx(e.Fragment,{children:t}):e.jsx(e.Fragment,{children:s})},At=({playerName:s,realTimeData:t})=>{const o=`https://mc-heads.net/avatar/${s}/64`,l=a.useMemo(()=>{if(!(t!=null&&t.biome))return"from-sky-200 to-green-200";const r=t.biome.toLowerCase();return r.includes("desert")?"from-yellow-200 via-orange-200 to-red-200":r.includes("snow")||r.includes("ice")?"from-blue-100 via-blue-200 to-white":r.includes("ocean")?"from-blue-300 via-blue-400 to-blue-500":r.includes("mountain")?"from-gray-200 via-gray-300 to-gray-400":r.includes("forest")?"from-green-100 via-green-200 to-green-300":r.includes("jungle")?"from-green-200 via-green-400 to-green-600":r.includes("savanna")?"from-yellow-100 via-yellow-200 to-orange-200":r.includes("swamp")?"from-green-300 via-brown-200 to-green-400":r.includes("nether")?"from-red-400 via-red-500 to-red-600":r.includes("end")?"from-purple-300 via-purple-400 to-purple-500":"from-sky-200 to-green-200"},[t==null?void 0:t.biome]),d=e.jsxs("div",{className:`w-48 h-48 bg-gradient-to-b ${l} rounded-lg overflow-hidden flex items-center justify-center shadow-lg relative`,children:[e.jsx("img",{src:o,alt:s,className:"w-16 h-16 rounded",onError:r=>{r.currentTarget.style.display="none"}}),(t==null?void 0:t.block_below)&&e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:t.block_below.replace("_"," ").toLowerCase()}),(t==null?void 0:t.biome)&&e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:t.biome.replace("_"," ").toLowerCase()})]});return e.jsx(Ft,{fallback:d,children:e.jsxs("div",{className:`w-48 h-48 bg-gradient-to-b ${l} rounded-lg overflow-hidden shadow-lg cursor-move relative`,children:[e.jsxs(pt,{camera:{position:[0,0,3],fov:50},onError:r=>{console.error("Canvas Error:",r)},children:[e.jsx("ambientLight",{intensity:.6}),e.jsx("directionalLight",{position:[2,4,2],intensity:.8,castShadow:!0}),e.jsx("directionalLight",{position:[-1,-1,-1],intensity:.3}),e.jsx(a.Suspense,{fallback:null,children:e.jsx(Ht,{playerName:s})})]}),(t==null?void 0:t.block_below)&&e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:t.block_below.replace("_"," ").toLowerCase()}),(t==null?void 0:t.biome)&&e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:t.biome.replace("_"," ").toLowerCase()}),t&&e.jsxs("div",{className:"absolute top-2 left-2 space-y-1",children:[e.jsxs("div",{className:"bg-red-500/80 text-white text-xs px-2 py-1 rounded flex items-center space-x-1",children:[e.jsx("span",{children:"❤"}),e.jsxs("span",{children:[t.health,"/20"]})]}),e.jsxs("div",{className:"bg-orange-500/80 text-white text-xs px-2 py-1 rounded flex items-center space-x-1",children:[e.jsx("span",{children:"🍖"}),e.jsxs("span",{children:[t.food,"/20"]})]})]})]})})},Ut=({player:s,onPlayerSelect:t,realTimePlayerData:o})=>{const[l,d]=a.useState(!1),{getProfileByUsername:r}=qe({fetchAll:!1}),p=`https://mc-heads.net/avatar/${s.name}/32`,i=()=>{if(t){const c=r(s.name);c&&t(c)}};return e.jsx("div",{className:"relative",children:e.jsxs(Pt,{openDelay:50,closeDelay:50,children:[e.jsx(Ot,{asChild:!0,children:e.jsxs("div",{className:"cursor-pointer transition-transform hover:scale-110 relative",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:i,children:[e.jsxs(Y,{className:"w-8 h-8 border-2 border-white shadow-md",children:[e.jsx(J,{src:p,alt:s.name}),e.jsx(q,{className:"text-xs",children:s.name.slice(0,2).toUpperCase()})]}),o&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border border-white animate-pulse"})]})}),e.jsx(je,{className:"w-auto p-2 bg-background/95 backdrop-blur-sm border shadow-xl rounded-xl",side:"top",sideOffset:10,children:l?e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(At,{playerName:s.name,realTimeData:o}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx(M,{variant:"outline",className:"text-sm font-medium cursor-pointer hover:bg-primary hover:text-primary-foreground",onClick:i,children:s.name}),o&&e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("div",{children:["World: ",o.world]}),e.jsxs("div",{children:["Level: ",o.level]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("span",{children:["❤ ",o.health,"/20"]}),e.jsxs("span",{children:["🍖 ",o.food,"/20"]})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsxs(Y,{className:"w-16 h-16 cursor-pointer",onClick:i,children:[e.jsx(J,{src:`https://mc-heads.net/avatar/${s.name}/64`,alt:s.name}),e.jsx(q,{children:s.name.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx(M,{variant:"outline",className:"text-sm font-medium cursor-pointer hover:bg-primary hover:text-primary-foreground",onClick:i,children:s.name}),o&&e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("div",{children:["Level ",o.level]})})]})]})})]})})},It=({players:s,loading:t,children:o,onPlayerSelect:l,realTimeData:d,side:r="bottom",sideOffset:p=0})=>{if(t||!s||s.length===0)return e.jsx(e.Fragment,{children:o});const[i,c]=a.useState(!1),x=a.useRef(null),m=()=>{x.current!==null&&(window.clearTimeout(x.current),x.current=null)},u=(y=700)=>{m(),x.current=window.setTimeout(()=>c(!1),y)},g=()=>{m(),c(!0)},j=()=>{u(700)},f=r==="top"?"bottom-full":r==="bottom"?"top-full":r==="left"?"right-full":"left-full",n=r==="top"?"mb-0":r==="bottom"?"mt-0":r==="left"?"mr-0":"ml-0",b=r==="top"?"-mt-2":r==="bottom"?"-mb-2":r==="left"?"-mr-2":"-ml-2";return e.jsxs("div",{className:"relative inline-block pointer-events-auto",children:[e.jsx("div",{onMouseEnter:g,onMouseLeave:j,children:o}),i&&e.jsx("div",{className:`absolute ${f} ${n} left-1/2 -translate-x-1/2 z-50`,onMouseEnter:g,onMouseLeave:j,children:e.jsx("div",{className:`w-auto max-w-2xl p-4 bg-background/95 backdrop-blur-sm border shadow-xl rounded-xl select-text ${b}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h4",{className:"text-sm font-semibold",children:"Players Online"})}),e.jsx("div",{className:"grid grid-cols-8 gap-3 max-h-40 overflow-y-auto",children:s.slice(0,24).map(y=>{const S=d==null?void 0:d.find(_=>_.name===y.name);return e.jsx(Ut,{player:y,onPlayerSelect:l,realTimePlayerData:S},y.uuid||y.name)})}),s.length>24&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",s.length-24," more players"]})]})})})]})},Bt=({isOpen:s,onClose:t})=>{const{toast:o}=gt(),l=async()=>{try{await navigator.clipboard.writeText("nordics.world"),o({title:"Copied!",description:"Server IP copied to clipboard"})}catch(r){console.error("Failed to copy to clipboard:",r),o({title:"Error",description:"Failed to copy to clipboard"})}},d=()=>{window.open("https://discord.gg/JXSVG367ux","_blank")};return e.jsx(Ke,{open:s,onOpenChange:t,children:e.jsxs(Ze,{className:"sm:max-w-md",children:[e.jsx(Qe,{children:e.jsx(et,{className:"text-center text-2xl font-bold",children:"Join Nordics Minecraft"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Server IP"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(M,{variant:"outline",className:"text-lg px-4 py-2 font-mono",children:"nordics.world"}),e.jsxs(I,{size:"sm",variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Copy"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Version Compatibility"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(M,{className:"bg-green-500 hover:bg-green-600",children:"Works best on 1.21.1"}),e.jsx(M,{variant:"outline",children:"Compatible with any version"})]})]})]}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(I,{onClick:d,variant:"outline",className:"w-full",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Join Our Discord",e.jsx(bt,{className:"w-4 h-4 ml-2"})]})}),e.jsx("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800/30",children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:[e.jsx("strong",{children:"Important:"})," Please read our"," ",e.jsx("button",{onClick:()=>window.open("/rules","_blank"),className:"text-orange-600 dark:text-orange-300 underline underline-offset-2 hover:no-underline transition-all duration-200 font-medium",children:"server rules"})," ","before joining to ensure a great experience for everyone."]})}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{className:"text-center",children:e.jsx("strong",{children:"How to join:"})}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-left",children:[e.jsx("li",{children:"Copy the server IP above"}),e.jsx("li",{children:"Open Minecraft and go to Multiplayer"}),e.jsx("li",{children:'Click "Add Server" and paste the IP'}),e.jsx("li",{children:'Click "Join Server" and start playing!'})]})]})]})]})})},Wt=()=>{var te,se;const{status:s,loading:t}=jt(),{towns:o,loading:l}=yt(),[d,r]=a.useState(!1),p=xe(),[i,c]=a.useState(null),[x,m]=a.useState(null),[u,g]=a.useState(null),[j,f]=a.useState(null),[n,b]=a.useState(null),y=a.useRef(null),S=a.useRef(null),[_,B]=a.useState(typeof window<"u"?window.innerWidth<640:!1),W=15360,F=typeof window<"u"&&window.innerWidth?Math.max(.05,window.innerWidth/W):.1,[P,ye]=a.useState(F),Ne=((te=s==null?void 0:s.players)==null?void 0:te.online)??0,ke=((se=s==null?void 0:s.players)==null?void 0:se.list)||[],Ce=(k,N)=>{const A=k- -7680,V=N-4224;return{x:A,y:V}};return a.useEffect(()=>{const k=()=>{const N=y.current;if(!N)return;const z=N.clientWidth||N.getBoundingClientRect().width;z>0&&ye(z/W),typeof window<"u"&&B(window.innerWidth<640)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),e.jsxs("section",{ref:S,className:"relative overflow-hidden py-24 lg:py-40 min-h-[90vh]",children:[e.jsx("style",{children:`
        @keyframes townPulse {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 0.7; }
        }
        @keyframes townGlow {
          0%, 100% { opacity: 0.15; }
          50% { opacity: 0.4; }
        }
        @keyframes townDotBreathe {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.15); }
        }
        .town-dot {
          animation: townPulse 2s ease-in-out infinite;
        }
        .town-glow {
          animation: townGlow 3s ease-in-out infinite;
        }
        .town-dot-breathe {
          transform-origin: center;
          transform-box: fill-box;
          animation: townDotBreathe 3s ease-in-out infinite;
        }
      `}),e.jsxs("div",{className:"absolute inset-0 opacity-30 pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-orange-500/20 rounded-full blur-3xl animate-pulse-glow"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-red-500/20 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-amber-500/20 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:e.jsx("img",{src:"/heightmapVector-full.png",alt:"Europe outline",className:"w-full h-full object-contain opacity-20 dark:opacity-10",style:{filter:"sepia(100%) saturate(600%) hue-rotate(-18deg) brightness(0.68) contrast(1.15) blur(1px)"}})}),e.jsxs("svg",{ref:y,viewBox:"0 0 15360 8832",className:"absolute inset-0 w-full h-full z-10",preserveAspectRatio:"xMidYMid meet",style:{opacity:1},children:[e.jsx("defs",{children:e.jsx("filter",{id:"dot-blur",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.8"})})}),!l&&o.map(k=>{if(k.location_x===null||k.location_z===null)return null;const N=Ce(k.location_x,k.location_z),re=Math.max(0,Math.min(5e3,k.balance??0))/5e3,A=_?.7:1,V=2.5,G=(V+(9-V)*re)*A,Se=G*2,_e=G*2.6,Re=Math.max(1,2*A),Ee=Math.max(1,2*A),Le=G/P,Me=Se/P,Pe=_e/P,Oe=Re/P,He=Ee/P,Fe=(_?22:16)/P,ne="#f97316",Ae=_?.3:.35,Ue=_?.12:.18,Ie=_?.22:.27;return e.jsxs("g",{style:{pointerEvents:"auto",cursor:"pointer"},onClick:E=>{if(c({...k}),m({x:N.x,y:N.y}),S.current){const L=S.current.getBoundingClientRect();g({x:E.clientX-L.left,y:E.clientY-L.top})}},onMouseEnter:E=>{if(f({...k}),S.current){const L=S.current.getBoundingClientRect();b({x:E.clientX-L.left,y:E.clientY-L.top})}},onMouseMove:E=>{if(S.current){const L=S.current.getBoundingClientRect();b({x:E.clientX-L.left,y:E.clientY-L.top})}},onMouseLeave:()=>{f(null),b(null)},children:[e.jsx("circle",{cx:N.x,cy:N.y,r:Fe,fill:"transparent",style:{pointerEvents:"all"}}),e.jsx("circle",{cx:N.x,cy:N.y,r:Pe,fill:"none",stroke:"#ffffff",strokeWidth:He,strokeOpacity:Ue}),e.jsx("circle",{cx:N.x,cy:N.y,r:Me,fill:"none",stroke:ne,strokeWidth:Oe,strokeOpacity:Ae}),e.jsx("circle",{cx:N.x,cy:N.y,r:Le,fill:ne,opacity:Ie,filter:"url(#dot-blur)",className:"town-dot-breathe"})]},k.id)})]}),i&&u&&e.jsx("div",{className:"absolute z-40",style:{left:Math.max(8,Math.min(window.innerWidth-280,u.x+10)),top:Math.max(8,u.y-10)},children:e.jsxs("div",{className:"rounded-xl border border-white/20 dark:border-white/10 shadow-md bg-white/70 dark:bg-neutral-900/60 backdrop-blur-md px-3 py-2 min-w-[220px] max-w-[280px]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:i.name}),e.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[i.is_capital&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-700 dark:text-orange-300 border border-orange-500/30",children:"Capital"}),i.nation_name&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200/50 dark:bg-neutral-800/50 border border-white/20 dark:border-white/10 text-neutral-700 dark:text-neutral-200",children:i.nation_name})]}),e.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:["(",i.location_x,", ",i.location_z,")"]})]}),e.jsx("button",{className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",onClick:()=>c(null),children:"×"})]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx("button",{className:"text-xs px-2 py-1 rounded-md bg-orange-500/80 text-white backdrop-blur-sm hover:bg-orange-500/90",onClick:()=>p(`/town/${encodeURIComponent(i.name)}`),children:"Open"})})]})}),j&&n&&e.jsx("div",{className:"absolute z-40 pointer-events-none",style:{left:Math.max(8,Math.min(window.innerWidth-220,n.x+10)),top:Math.max(8,n.y-28)},children:e.jsxs("div",{className:"px-2 py-1 rounded-lg bg-white/70 dark:bg-neutral-900/60 border border-white/20 dark:border-white/10 backdrop-blur-md shadow-sm",children:[e.jsx("div",{className:"text-[11px] font-medium text-neutral-900 dark:text-neutral-50",children:j.name}),j.nation_name&&e.jsx("div",{className:"text-[10px] text-neutral-600 dark:text-neutral-300",children:j.nation_name})]})}),e.jsx("div",{className:"relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(st,{size:"lg",className:"shrink-0 w-20 h-20 md:w-24 md:h-24"})}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-medium mb-6 animate-fade-in",children:["Welcome to"," ",e.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Nordics Minecraft"})]}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground mb-12 max-w-2xl mx-auto animate-fade-in",style:{animationDelay:"0.2s"},children:"Build a thriving town. Start companies, make money, and grow. Form alliances, face rivals, and shape the world."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-16 animate-fade-in pointer-events-none",style:{animationDelay:"0.4s"},children:[e.jsxs(I,{size:"lg",className:"backdrop-blur-sm bg-gradient-to-r from-orange-500/85 to-red-500/85 hover:from-orange-500/95 hover:to-red-500/95 text-white px-8 py-4 rounded-2xl text-lg font-medium hover-lift glow-primary group pointer-events-auto",onClick:()=>r(!0),children:["Join nordics.world",e.jsx(ue,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx(I,{variant:"outline",size:"lg",className:"backdrop-blur-sm bg-white/30 dark:bg-neutral-900/30 border-2 border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300 hover:bg-white/40 dark:hover:bg-neutral-900/40 px-8 py-4 rounded-2xl text-lg font-medium hover-lift pointer-events-auto",onClick:()=>window.open("https://map.nordics.world","_blank"),children:"View Live Map"})]}),e.jsx("div",{className:"flex justify-center animate-fade-in",style:{animationDelay:"0.6s"},children:(s==null?void 0:s.online)&&e.jsx(It,{players:ke,loading:t,side:"top",sideOffset:2,children:e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl px-3 py-1.5 bg-white/20 dark:bg-neutral-900/20 backdrop-blur-sm border border-orange-300/60 dark:border-orange-800/60 text-orange-800 dark:text-orange-200 cursor-pointer pointer-events-auto",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"font-medium",children:"Online"}),e.jsxs("span",{className:"text-sm opacity-80",children:["• ",Ne," Players"]})]})})})]})}),e.jsx(Bt,{isOpen:d,onClose:()=>r(!1)})]})},zt=()=>{const s=xe(),[t,o]=a.useState([]),[l,d]=a.useState([]),[r,p]=a.useState([]),[i,c]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const{data:b}=await U.from("forum_categories").select("*").in("slug",["patches","news"]).order("order_index",{ascending:!0});if(b){p(b);const y=b.map(F=>F.id),{data:S}=await U.from("forum_posts").select(`
              *,
              author:profiles(id, full_name, email, avatar_url, minecraft_username),
              category:forum_categories(id, name, slug)
            `).in("category_id",y).order("created_at",{ascending:!1}).limit(4),{data:_}=await U.from("forum_categories").select("id").is("nation_name",null).is("town_name",null).eq("role_required","member"),B=(_||[]).map(F=>F.id),{data:W}=await U.from("forum_posts").select(`
              *,
              author:profiles(id, full_name, email, avatar_url, minecraft_username),
              category:forum_categories(id, name, slug)
            `).in("category_id",B.length?B:["00000000-0000-0000-0000-000000000000"]).order("created_at",{ascending:!1}).limit(8);o(S||[]),d(W||[])}}catch(b){console.error("Error fetching forum posts:",b)}finally{c(!1)}})()},[]);const x=n=>{switch(n){case"Patch Notes":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"News & Announcements":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"Events":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200";default:return"bg-orange-50 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300"}},m=n=>{var b;return((b=n.category)==null?void 0:b.name)||"Unknown"},u=n=>(n==null?void 0:n.minecraft_username)||(n==null?void 0:n.full_name)||"Unknown User",g=n=>n!=null&&n.minecraft_username?`https://mc-heads.net/avatar/${n.minecraft_username}/32`:(n==null?void 0:n.avatar_url)||"",j=(n,b=150)=>{const y=n.replace(/<[^>]*>/g,"");return y.length>b?y.substring(0,b)+"...":y},f=n=>{s(`/forum/post/${n.id}`)};return e.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50/50 via-red-50/50 to-amber-50/50 dark:from-orange-950/20 dark:via-red-950/20 dark:to-amber-950/20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(he,{className:"h-6 w-6 text-orange-500"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Latest News"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay updated with the latest server news, events, and announcements"})]}),i?e.jsxs("div",{className:"mb-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Featured"}),e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(de,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):t.length>0?e.jsxs("div",{className:"mb-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Featured"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(n=>e.jsxs(K,{className:"hover:shadow-lg transition-shadow cursor-pointer border-orange-200 dark:border-orange-800 hover:border-orange-300 dark:hover:border-orange-700",onClick:()=>f(n),children:[e.jsxs(rt,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(M,{className:x(m(n)),children:m(n)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(n.created_at).toLocaleDateString()})]}),e.jsx(nt,{className:"text-lg hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:n.title})]}),e.jsxs(Z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:j(n.content)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Y,{className:"w-6 h-6",children:[e.jsx(J,{src:g(n.author),alt:u(n.author)}),e.jsx(q,{className:"text-xs",children:u(n.author).slice(0,2).toUpperCase()})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:u(n.author)})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),n.reply_count||0]})]})]})]},n.id))})]}):e.jsxs("div",{className:"mb-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Featured"}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No featured posts available."})})]}),i?e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Recent Updates"}),e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(de,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Recent Updates"}),l.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(n=>e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer border-orange-200 dark:border-orange-800 hover:border-orange-300 dark:hover:border-orange-700",onClick:()=>f(n),children:e.jsxs(Z,{className:"p-4",children:[e.jsx(M,{className:`${x(m(n))} mb-2`,children:m(n)}),e.jsx("h4",{className:"font-medium mb-2 line-clamp-2 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:n.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:j(n.content,100)}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ot,{className:"w-3 h-3 mr-1"}),new Date(n.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),n.reply_count||0]})]})]})},n.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent forum posts available."})})]}),e.jsx("div",{className:"text-center",children:e.jsx(at,{to:"/forum",children:e.jsxs(I,{className:"inline-flex items-center gap-2 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white",children:["View All Forum Posts",e.jsx(ue,{className:"w-4 h-4"})]})})})]})})},Vt=({features:s})=>e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(he,{className:"h-6 w-6 text-orange-500"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Server Features"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Discover what makes Nordics the perfect place for your Minecraft journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((t,o)=>e.jsx(K,{className:"hover:shadow-lg transition-shadow border-orange-200 dark:border-orange-800 hover:border-orange-300 dark:hover:border-orange-700",children:e.jsxs(Z,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:t.icon}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})},o))})]})}),ss=()=>{const s=[{icon:e.jsx(it,{className:"w-8 h-8 text-orange-500"}),title:"Towny System",description:"Create and manage your own town, invite friends, and build an empire together."},{icon:e.jsx(lt,{className:"w-8 h-8 text-red-500"}),title:"Active Community",description:"Join our friendly community of builders, explorers, and adventurers from around the world."},{icon:e.jsx(wt,{className:"w-8 h-8 text-amber-500"}),title:"Economy System",description:"Trade with other players, create shops, and build your wealth in our dynamic economy."},{icon:e.jsx(ct,{className:"w-8 h-8 text-orange-600"}),title:"Interactive Map",description:"Explore our world with our detailed interactive map showing towns, nations, and points of interest."}];return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{}),e.jsx(zt,{}),e.jsx(Vt,{features:s})]})};export{ss as default};
