import{r as P,j as e,w as a,x as i,y as r,z as c,v as I,B as t}from"./index-BDwxLbfg.js";const R=()=>{var m,h,j,v,S,f,u,E,N,p,T,g,_,A,y,K;const[s,l]=P.useState(null),[x,o]=P.useState(!1),B=async()=>{o(!0),l(null);try{const n={VITE_SUPABASE_S3_SECRET_KEY:void 0,VITE_SUPABASE_URL:void 0,VITE_SUPABASE_ANON_KEY:void 0},V="https://erdconvorgecupvavlwv.supabase.co/storage/v1/object/public/wiki/Nordics/nations/constellation.md",d=await fetch(V),U=await d.text(),C={accessKeyId:"96dbaa973dcb77349745eb36d4e9e93a",secretAccessKey:void 0,hasSecretKey:!1,secretKeyLength:0,secretKeyStartsWith:"N/A"};l({envVars:n,fileTest:{url:V,status:d.status,ok:d.ok,contentLength:U.length,contentPreview:U.substring(0,100)+"..."},s3Test:C})}catch(n){l({error:n instanceof Error?n.message:String(n)})}finally{o(!1)}};return e.jsx("div",{className:"container mx-auto p-6 space-y-6",children:e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(r,{children:"Simple Wiki Test - Environment & S3 Credentials"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsx(I,{onClick:B,disabled:x,children:x?"Testing...":"Test Environment & S3"}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg",children:"Environment Variables"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"VITE_SUPABASE_S3_SECRET_KEY:"}),e.jsx(t,{variant:(m=s.envVars)!=null&&m.VITE_SUPABASE_S3_SECRET_KEY?"default":"destructive",children:(h=s.envVars)!=null&&h.VITE_SUPABASE_S3_SECRET_KEY?"✅ Set":"❌ Missing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"VITE_SUPABASE_URL:"}),e.jsx(t,{variant:(j=s.envVars)!=null&&j.VITE_SUPABASE_URL?"default":"destructive",children:(v=s.envVars)!=null&&v.VITE_SUPABASE_URL?"✅ Set":"❌ Missing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"VITE_SUPABASE_ANON_KEY:"}),e.jsx(t,{variant:(S=s.envVars)!=null&&S.VITE_SUPABASE_ANON_KEY?"default":"destructive",children:(f=s.envVars)!=null&&f.VITE_SUPABASE_ANON_KEY?"✅ Set":"❌ Missing"})]})]})})]}),e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg",children:"S3 Credentials Test"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Access Key ID:"}),e.jsx(t,{variant:"outline",children:(u=s.s3Test)==null?void 0:u.accessKeyId})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Secret Key Present:"}),e.jsx(t,{variant:(E=s.s3Test)!=null&&E.hasSecretKey?"default":"destructive",children:(N=s.s3Test)!=null&&N.hasSecretKey?"✅ Yes":"❌ No"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Secret Key Length:"}),e.jsx(t,{variant:"outline",children:(p=s.s3Test)==null?void 0:p.secretKeyLength})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Secret Key Preview:"}),e.jsx(t,{variant:"outline",children:(T=s.s3Test)==null?void 0:T.secretKeyStartsWith})]})]})})]}),e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg",children:"File Access Test"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Test URL:"}),e.jsx(t,{variant:"outline",className:"text-xs",children:(g=s.fileTest)==null?void 0:g.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Status:"}),e.jsx(t,{variant:(_=s.fileTest)!=null&&_.ok?"default":"destructive",children:(A=s.fileTest)==null?void 0:A.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Content Length:"}),e.jsx(t,{variant:"outline",children:(y=s.fileTest)==null?void 0:y.contentLength})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-mono text-sm",children:"Content Preview:"}),e.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-auto",children:(K=s.fileTest)==null?void 0:K.contentPreview})]})]})})]}),s.error&&e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg text-red-600",children:"Error"})}),e.jsx(c,{children:e.jsx("pre",{className:"text-red-600 text-sm",children:s.error})})]})]})]})]})})};export{R as default};
